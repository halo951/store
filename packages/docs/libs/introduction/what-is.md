# 简介

> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在聊这个工具前, 先跟大家聊下什么是 `Store`。从单词含义上来讲, 有**商店**、**仓库**的意思。从`vuex`等工具的定义中, `Store`是一种 **状态管理模式**, 通过状态驱动视图更新。在实际生产中, `Store` 工具一般用于解决如下问题:
>
> -   解决组件间复杂的状态传递问题. 如: vuex, pinia, redux, dva 这些工具.
> -   解决全局状态维护的问题. 如: 用户 `token` 的维护.
> -   解决服务抽象问题. 如: 解耦 `支付`, `用户态管理`等复杂服务.
> -   解决中大型项目协作问题. (ps: 本质上, 仍然是服务抽象)
> -   以及一些扩展功能, 如: `持久化`, `orm映射`等.
>
> 如果, 你的项目碰到上述问题, 那么你可以考虑接入一款 `Store` 工具, 来解决这些问题.

## 特性

在 Vuex 等一系列状态管理工具中, 核心概念就是通过 tree node 方式, 维护整个项目的视图状态. 但 `@fdu/store` 的目的在于让你的服务(数据处理操作, 组合式操作)、全局状态从视图层(views)中抽象出来.

`@fdu/store` 是一个面向 `Class API`范式的**状态管理工具**, 最初的灵感来源于 `vuex`, 为了解决 vuex 复杂的调用逻辑而创建. 重点采用 `typescrpit` 的一些特性、扁平化设计来解决 vuex

`@fdu/store` 是一款面向`Class API`编程的**状态管理工具**. 重点用来解决服务抽象问题. 具备如下特性:

-   适用场景

    -   采用适配器模式设计. 支持 vue2.x, vue3.x. (react 的在开发中) 可以根据项目环境手工指定.

-   devTool 支持

    -   支持 vue-devtool 的状态快照 (state snapshot)
    -   支持 时间旅行, 目前能够做到对状态变更, action 行为调用的捕获.

-   插件化

    -

-   持久化

    -   默认集成持久化能力, 具体详见[原因]().
    -   支持模块下

-   机制简单
    -   这套工具的实现上, 主要采用`注入`和 `Proxy`来实现

编程范式方面, 大量采用 `typescript` 提供的新特性(装饰器, 泛型)

## 选择 @fdu/store 的理由

那么, 什么情况下选择

&nbsp;&nbsp;&nbsp;&nbsp;首先, 是

## 灵感来源

vue 开发实践中, 一般中小型的项目不会去考虑用`vuex`优化项目. 原因就在于 vuex 需要额外学习一套 API 特性, 对于初级开发者来说, 不太友好。 在开始使用`vuex`的时候, 我就因为 `dispath`、`Mutation`、`actions`纠结许久. 我整理了如下表格, 对这些能力做了整理.

| vuex API | ESNext API  | desc                 |
| -------- | ----------- | -------------------- |
| state    | -           | 作为数据源及模型定义 |
| Mutation | getter 语法 |                      |

-   有些理解差异的描述, 参考如下 code.

```typescript
class Example {
    // es getter 语法
    get n() {}
    set n() {}
}
```

`Mutation` ≈ es 的 `setter`
